<h2>Add formula</h2>
<form ng-submit="addFormula()" ng-controller="AddFormulaController">
	<table>
		<tr>
			<td>
				Name : 
			</td>
			<td>
				<input type="text" ng-model="formula.name"/>
			</td>
		</tr>	
		<tr>
			<td colspan="2">
				<h3>Define patterns</h3>
			</td>
		</tr>
	</table>
	<div ng-repeat="status in formula.statuses">
		<h4 style='display:inline-block;'>Status : {{ status.statusValue }}</h4><input type='button' ng-click="addConditions(formula)">+</input><input type='button' ng-click="addRow(status)" value="Add Row"/>
		<table>
		<tr ng-repeat="pattern in status.patterns">
			
			<td>
				Current : {{ pattern.dataset.name }}<br>
				<select ng-model="pattern.newDataset" ng-options="dataset.name for dataset in datasets">
      			</select>
			</td>
			<td>
				Current : {{ pattern.compare }}<br>
				<select ng-model="pattern.newCompare" ng-options="option for option in ['Less','Equal','More']">
      			</select>
			</td>
			<td>
				<input type='text' ng-model="pattern.frequency"/>
			</td>
			<td>
				<input type='numeric' ng-model="pattern.occurences"/>
			</td>
			<td>
				<input type='text' ng-model="pattern.value"/>
			</td>
			
			
		</tr>
	</table>	
	</div>
	<input type='submit'/>
</form>